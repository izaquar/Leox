<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.5: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/*ORIGINAL GOODGER + changes; up to line 224 it's standard reST stylesheet
:Author: David Goodger
:Contact: goodger@users.sourceforge.net
:date: $Date: 2006/10/19 13:23:15 $
:version: $Revision: 1.2 $
:copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.
*/

/* EKR 10/19/06 */
/* some browsers require imported rules to precede all rulesets */
@import url(leo_rst.css);
@import url(silver_city.css);

.first {
  margin-top: 0 }

.last {
  margin-bottom: 0 }

a.toc-backref {
  text-decoration: none ;
  color: black }

dd {
  margin-bottom: 0.5em }

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.attention, div.caution, div.danger, div.error, div.hint,
div.important, div.note, div.tip, div.warning, div.admonition {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

div.hint p.admonition-title, div.important p.admonition-title,
div.note p.admonition-title, div.tip p.admonition-title,
div.admonition p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em }

div.footer, div.header {
  font-size: smaller }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 0em 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.line-block {
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;}
  /*background-color: #eeeeee }*/
  /*for some reason i can't overide in an import*/

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.option-argument {
  font-style: italic }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

table {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.citation {
  border-left: solid thin gray ;
  padding-left: 0.5ex }

table.docinfo {
  margin: 2em 4em }

table.footnote {
  border-left: solid thin black ;
  padding-left: 0.5ex }

td, th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

th.docinfo-name, th.field-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap }

h1 tt, h2 tt, h3 tt, h4 tt, h5 tt, h6 tt {
  font-size: 100% }

/*for some reason, the following isn't being overridden by the imports
at the end of this style sheet so I've commented it out*/
/*tt {
  background-color: #eeeeee }*/

ul.auto-toc {
  list-style-type: none }
  
hr { /* EKR */
  width: 100%;
  height: 1pt;
  color: gray;
}



</style>
</head>
<body>
<div class="document">


<!-- rst3: filename: html\history.html -->
<p><a class="reference" href="customizing.html"><img alt="back" src="arrow_lt.gif" /></a> <a class="reference" href="front.html"><img alt="leo" src="leo.gif" /></a> <a class="reference" href="theory.html"><img alt="next" src="arrow_rt.gif" /></a></p>
<div class="section">
<h1><a class="toc-backref" href="#id1" id="chapter-9-history-of-leo" name="chapter-9-history-of-leo">Chapter 9: History of Leo</a></h1>
<p>This chapter discusses the history of Leo and tells the essential features of each version.
Here are the most important dates in Leo's history:</p>
<div class="contents topic">
<p class="topic-title first"><a id="contents" name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#chapter-9-history-of-leo" id="id1" name="id1">Chapter 9: History of Leo</a><ul>
<li><a class="reference" href="#beginnings" id="id2" name="id2">Beginnings</a></li>
<li><a class="reference" href="#breakthrough" id="id3" name="id3">Breakthrough</a></li>
<li><a class="reference" href="#apple-and-yellowbox" id="id4" name="id4">Apple and YellowBox</a></li>
<li><a class="reference" href="#borland-c" id="id5" name="id5">Borland C++</a></li>
<li><a class="reference" href="#discovering-python" id="id6" name="id6">Discovering Python</a></li>
<li><a class="reference" href="#sourceforge" id="id7" name="id7">SourceForge</a></li>
<li><a class="reference" href="#allowing-sentinel-lines-in-derived-files" id="id8" name="id8">Allowing sentinel lines in derived files</a></li>
<li><a class="reference" href="#untangling-file-is-easy" id="id9" name="id9">Untangling &#64;file is easy!</a></li>
<li><a class="reference" href="#leo-3-x-continuous-improvement" id="id10" name="id10">Leo 3.x: Continuous improvement</a></li>
<li><a class="reference" href="#leo-4-0-eliminating-error-recovery" id="id11" name="id11">Leo 4.0: Eliminating error 'recovery'</a></li>
<li><a class="reference" href="#leo-4-1-the-debut-of-gnx-s" id="id12" name="id12">Leo 4.1: The debut of gnx's</a></li>
<li><a class="reference" href="#leo-4-2-complete-at-last" id="id13" name="id13">Leo 4.2: Complete at last</a></li>
<li><a class="reference" href="#leo-4-3-settings" id="id14" name="id14">Leo 4.3 Settings</a></li>
<li><a class="reference" href="#leo-4-4-the-minibuffer-and-key-bindings" id="id15" name="id15">Leo 4.4 The minibuffer and key bindings</a></li>
</ul>
</li>
</ul>
</div>
<!-- Relative links... -->
<!-- Absolute links.. -->
<!-- WARNING: image targets may not have upper case letters! -->
<div class="section">
<h2><a class="toc-backref" href="#id2" id="beginnings" name="beginnings">Beginnings</a></h2>
<p>Leo grew out of my efforts to use Donald Knuth's &quot;CWEB system of Structured
documentation.&quot; I had known of literate programming since the mid 1980's, but I
never understood how to make it work for me. In November 1995 I started thinking
about literate programming in earnest. Over the holidays I mused about making
literate programs more understandable. In January 1996 the fog of confusion
suddenly cleared. I summarized my thinking with the phrase, <strong>web are outlines
in disguise</strong>. I suspected that outline views were the key to literate
programming, but many details remained obscure.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id3" id="breakthrough" name="breakthrough">Breakthrough</a></h2>
<p>March 5, 1996, is the most important date in Leo's history. While returning from
a day of skiing, I discussed my thoughts with Rebecca. During that conversation
I realized that I could use the <tt class="docutils literal"><span class="pre">MORE</span></tt> outliner as a prototype for a &quot;literate
outliner.&quot; I immediately started work on my first literate outline. It quickly
became apparent that outlines work: all my old problems with literate
programming vanished. The <tt class="docutils literal"><span class="pre">&#64;others</span></tt> directive dates from this day. I realized
that <tt class="docutils literal"><span class="pre">MORE</span></tt>'s outlines could form the basis for Leo's screen design. Rather
than opening body text within the outline, as <tt class="docutils literal"><span class="pre">MORE</span></tt> does, I decided to use a
separate body pane.</p>
<p>I hacked a translator called <tt class="docutils literal"><span class="pre">M2C</span></tt> which allowed me to use <tt class="docutils literal"><span class="pre">MORE</span></tt> to write
real code. I would write code in <tt class="docutils literal"><span class="pre">MORE</span></tt>, copy the text to the clipboard in
<tt class="docutils literal"><span class="pre">MORE</span></tt> format, then run <tt class="docutils literal"><span class="pre">M2C</span></tt>, which would tangle the outline into C code.
This process was useful, if clumsy. I called the language used in the outline
<tt class="docutils literal"><span class="pre">SWEB</span></tt>, for simplified <tt class="docutils literal"><span class="pre">CWEB</span></tt>. Much later Leo started supporting the noweb
language.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id4" id="apple-and-yellowbox" name="apple-and-yellowbox">Apple and YellowBox</a></h2>
<p>Throughout 1996 I created a version of Leo on the Macintosh in plain C and the
native Mac Toolbox. This was a poor choice; I wasted a huge amount of time
programming with these primitive tools. However, this effort convinced me that
Leo was a great way to program.</p>
<p>Late in 1997 I wrote a <tt class="docutils literal"><span class="pre">Print</span></tt> command to typeset an outline. Printing (Weaving)
is supposedly a key feature of literate programming. Imagine my surprise when I
realized that such a &quot;beautiful&quot; program listing was almost unintelligible; all
the structure inherent in the outline was lost! I saw clearly that typesetting,
no matter how well done, is no substitute for explicit structure.</p>
<p>In 1998 I created a version of Leo using Apple's YellowBox environment. Alas,
Apple broke its promises to Apple developers. I had to start again.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id5" id="borland-c" name="borland-c">Borland C++</a></h2>
<p>I rewrote Leo for Borland C++ starting in May 1999. Borland C++ was much better
than CodeWarrior C, but it was still C++. This version of Leo was the first
version to use xml as the format of .leo files. The last version of Borland Leo,
3.12 Final went out the door July 17, 2003.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id6" id="discovering-python" name="discovering-python">Discovering Python</a></h2>
<p>I attended the Python conference in early 2001. In May of 2000 I began work on
an wxWindows version of Leo. This did not work out, but something good did come
from this effort. I spent a lot of time adding Python scripting to the wxWindows
code and I became familiar with Python and its internals.</p>
<p>I really started to 'get' Python in September 2001. I wrote the white papers at
about this time. Python solved <em>all</em> my programming problems. I rewrote Leo in
Python in about two months! For the first time in my career I was no longer
anxious while programming; it simply isn't possible to create bad bugs in
Python. The Python version of Leo the first officially OpenSoftware version of
Leo. The first functional version of Leo in Python was 0.05 alpha, December 17,
2001.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id7" id="sourceforge" name="sourceforge">SourceForge</a></h2>
<p>I registered the Leo project on SourceForge on March 10, 2003. It is certainly
no accident that Leo started a new life shortly thereafter. Prior to SourceForge
my interest in Leo had been waning.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id8" id="allowing-sentinel-lines-in-derived-files" name="allowing-sentinel-lines-in-derived-files">Allowing sentinel lines in derived files</a></h2>
<p>In the summer of 2001 I began to consider using sentinel lines in derived files.
Previously I had thought that outline structure must be 'protected' by remaining
inside .leo files. Accepting the possibility that sentinels might be corrupted
opened vast new design possibilities. In retrospect, problems with sentinel
almost never happen, but that wasn't obvious at the time! The result of this
design was known at first as <tt class="docutils literal"><span class="pre">Leo2</span></tt>. That terminology is extinct. I think of
this version as the first version to support <tt class="docutils literal"><span class="pre">&#64;file</span></tt> and automatic tangling
and untangling.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id9" id="untangling-file-is-easy" name="untangling-file-is-easy">Untangling &#64;file is easy!</a></h2>
<p>The biggest surprise in Leo's history was the realization it is <strong>much</strong> easier
to untangle files derived from <tt class="docutils literal"><span class="pre">&#64;file</span></tt>. Indeed, <tt class="docutils literal"><span class="pre">&#64;root</span></tt> creates all sorts of
problems that just disappear when using <tt class="docutils literal"><span class="pre">&#64;file</span></tt>. The new Python version of Leo
became fully operational in early 2002. It was probably about this time that I chose
noweb as Leo's preferred markup language. My decision not to support noweb's
escape sequences made Leo's read code much more robust.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id10" id="leo-3-x-continuous-improvement" name="leo-3-x-continuous-improvement">Leo 3.x: Continuous improvement</a></h2>
<p>I spent 2002 taking advantages of Python's tremendous power and safety.
Many improvements were at last easy enough to do:</p>
<ul class="simple">
<li>Nested <tt class="docutils literal"><span class="pre">&#64;others</span></tt> directives appeared in 3.2.</li>
<li>Unicode support started in 3.3.</li>
<li>&#64;first and &#64;last appeared in 3.7</li>
<li>&#64;asis and &#64;nosent appeared in 3.8.</li>
<li>Incremental syntax coloring and incremental undo appeared in 3.9.</li>
<li>Paul Paterson created Leo's plugin architecture sometime during this period.
Plugins have been a driving force in Leo's development because people can
change how Leo works without altering Leo's core.</li>
<li>3.12 fixed a huge memory leak.</li>
<li>3.12 Final, the last 3.x version, appeared July 17, 2003.</li>
</ul>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id11" id="leo-4-0-eliminating-error-recovery" name="leo-4-0-eliminating-error-recovery">Leo 4.0: Eliminating error 'recovery'</a></h2>
<p>In late 2002 and throughout 2003 I worked on an entirely new file format.
4.0 final went out the door October 17, 2003 after almost a year intense
design work trying to improve error recovery scheme used while reading
derived files. In the summer of 2003 I realized that orphan and <tt class="docutils literal"><span class="pre">&#64;ignore</span></tt>'d
nodes must be prohibited in <tt class="docutils literal"><span class="pre">&#64;file</span></tt> trees. With this restriction, Leo
could finally recreate <tt class="docutils literal"><span class="pre">&#64;file</span></tt> trees in outlines using <strong>only</strong> the
information in derived files. This made the read code much more robust, and
eliminated all the previous unworkable error recovery schemes. At last Leo
was on a completely firm foundation.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id12" id="leo-4-1-the-debut-of-gnx-s" name="leo-4-1-the-debut-of-gnx-s">Leo 4.1: The debut of gnx's</a></h2>
<p>Leo first used gnx's (global node indices) as a foolproof way of associating
nodes in .leo files with nodes in derived files. At the time, there was
still intense discussions about protecting the logical consistency of
outlines. <tt class="docutils literal"><span class="pre">&#64;thin</span></tt> was later to solve all those problems, but nobody knew
that then.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id13" id="leo-4-2-complete-at-last" name="leo-4-2-complete-at-last">Leo 4.2: Complete at last</a></h2>
<p>Leo 4.2 Final went out the door September 20, 2004.
This surely is one of the most significant dates in Leo's history:</p>
<ul class="simple">
<li>This marked the end worries about consistency of outlines and derived files:
Leo recreates all essential information from thin derived files,
so <em>there is nothing left in the .leo file to get out of synch</em>.</li>
<li>Thin derived files use gnx's extensively.  This simplifies the file format and makes thin derived files
more cvs friendly.</li>
<li>A sensational scripting plugin showed how to create script buttons.
This has lead to improvements in the Execute Script command and
other significant improvements in Unit testing.</li>
<li>As if this were not enough, 4.2 marked the 'great divide' in Leo's internal
data structures. Before 4.2, Leo every node in the outline had its own
<tt class="docutils literal"><span class="pre">vnode</span></tt>. This was a big performance problem: clone operations had to
traverse the entire outline! 4.2 represents clones by sharing subtrees.
Changing Leo's fundamental data structures while retaining compatibility
with old scripts was engineering work of which the entire Leo community can
be proud. <a class="reference" href="scripting.html">Chapter 7: Scripting Leo with Python</a> tells how the position
class makes this happen.
This was a cooperative effort. Kent Tenney and Bernhard Mulder made
absolutely crucial contributions. Kent pointed out that it is a <tt class="docutils literal"><span class="pre">tnode</span></tt>,
not a <tt class="docutils literal"><span class="pre">vnode</span></tt> that must form the root of the shared data. Bernhard showed
that iterators are the way to avoid creating huge numbers of positions.</li>
</ul>
<p>Leo 4.2 marked so many significant changes. I often find it hard to remember
what life with Leo was like before it.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id14" id="leo-4-3-settings" name="leo-4-3-settings">Leo 4.3 Settings</a></h2>
<p>Leo 4.3 corrected many problems with <tt class="docutils literal"><span class="pre">leoConfig.txt</span></tt>. Instead, Leo gets
settings from one or more <tt class="docutils literal"><span class="pre">leoSettings.leo</span> <span class="pre">files</span></tt>. This version also
introduced a way to changed settings using a settings dialog.  However,
the settings dialog proved not to be useful (worse, it inhibited design) and
the settings dialog was retired in Leo 4.4.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id15" id="leo-4-4-the-minibuffer-and-key-bindings" name="leo-4-4-the-minibuffer-and-key-bindings">Leo 4.4 The minibuffer and key bindings</a></h2>
<p>Leo 4.4 was a year-long effort to incorporate an Emacs-style minibuffer and
related commands into Leo. Thinking in terms of minibuffer commands frees my
thinking. Leo 4.4 also featured many improvements in how keys are bound to
commands, including per-pane bindings and user-defined key-binding modes.</p>
<p>Development on long-delayed projects accelerated after 4.4 final went out the door.
Recent projects include:</p>
<ul class="simple">
<li>Controlling syntax coloring with jEdit's xml language-description files.
See Chapter 15.</li>
<li>Support for debugging scripts using external debuggers.
See Chapter 16.</li>
<li>Modifying Leo's vnodes and tnodes so that Leo's data can be used with ZODB.
See Chapter 17.</li>
<li>Reading and writing Leo outlines in <a class="reference" href="http://en.wikipedia.org/wiki/OPML">OPML</a> format.
See Chapter 18.</li>
</ul>
<hr class="docutils" />
<p><a class="reference" href="customizing.html"><img alt="back" src="arrow_lt.gif" /></a> <a class="reference" href="front.html"><img alt="leo" src="leo.gif" /></a> <a class="reference" href="theory.html"><img alt="next" src="arrow_rt.gif" /></a></p>
</div>
</div>
</div>
</body>
</html>
